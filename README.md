# node-matrix-assets-xml

Generate XML for Squiz Matrix' "Import Assets from XML Tool" from asset trees.

[![Build Status](https://travis-ci.org/joshgillies/node-matrix-assets-xml.svg)](https://travis-ci.org/joshgillies/node-matrix-assets-xml)
[![js-standard-style](https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat)](https://github.com/feross/standard)

## Install

`npm install node-matrix-assets-xml`

## Example

```js
import asset from 'node-matrix-assets'
import assetsToXML from 'node-matrix-assets-xml'

const { getAssetById } = asset

let tree = asset('folder', { name: 'Sites', link: 'type_2' },
  asset('site', { id: 'site', name: 'My Site' },
    asset('page_standard', { name: 'Home', link: { index: getAssetById('site') } },
      asset('bodycopy', { link: 'type_2', dependant: '1', exclusive: '1' },
        asset('bodycopy_div', { link: 'type_2', dependant: '1' },
          asset('content_type_wysiwyg', { link: 'type_2', dependant: '1', exclusive: '1' })
        )
      )
    )
  )
)
let xml = assetsToXML(tree)

console.log(xml)
```

## API

### assetsToXML

`node-matrix-assets-xml` provides an API for generating XML for Squiz Matrix' "Import Assets from XML Tool" via `require('node-matrix-bundler')`.

### var xml = assetsToXML(assets, parentId)

The `assets` argument accepts an asset tree as generated by the `node-matrix-assets` mdoule.

The `parentId` argument accepts ad ID of an asset in an existing Squiz Matrix system.

### Custom Importer instance

Internally `node-matrix-assets-xml` uses `node-matrix-importer` to generate valid XML
for Squiz Matrix' "Import Assets from XML Tool".

In some cases you may want to supply your own instance of `node-matrix-importer`.

To do so, you can pass your custom Importer instance as the first argument to `assetsToXML`.

```js
const xmlImporter = new Importer({
  sortActions: true
})

xmlImporter.on('create_asset', (asset) => {
  console.log('asset created!')
})

const generateXML = assetsToXML(xmlImporter)
const xml = generateXML(tree)

console.log(xml)
```

## License

MIT
